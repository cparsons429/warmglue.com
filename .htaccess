DirectoryIndex landing.php

RewriteEngine On

# if the first part of this request is written like a directory, but is a file, send to page not found
RewriteCond %{REQUEST_URI} ^/([^/]+)/(.+)$
RewriteCond /var/www/html/%1\.php -f
RewriteRule ^(.*)$ /pagenotfound [L,R=301]

# remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# send PHP files to page not found
# redirect status is to prevent against internal redirect loop
# the two request filename conditions are to make sure this is a valid file, but not the empty file (the directory index)
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond %{REQUEST_FILENAME}\.php !-f
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ /pagenotfound [L,R=301]

# check to see if the request is for a PHP file:
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^/?(.*)$ /$1\.php [L]
